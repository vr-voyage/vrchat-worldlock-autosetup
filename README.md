【VRCHAT】World lock autosetup - アバター・アイテムをワールド固定する機能追加ツール

# Usage

## Lock an item with Particles

* Add the item to the Scene root
* Add your avatar to the Scene root
* For good measures, make sure that your avatar is at position 0,0,0 when measuring the distance between your avatar and the object you want to setup
* Move the added item where you'd like to see it spawned, in relation to your avatar

* Open the menu "Voyage > Pin Objects with Particles (PC & Quest)"
* Drop your avatar on the "Avatar" slot
* Open the "World Locked Objects" by clicking on the arrow on its left
* Drop the item on "Element 0"
* Click on "Setup world lock object"
* A new setup clone of the avatar will appear.

You can then upload the clone.

This new clone main menu will have two new buttons :
* Spawn - Which allows you to spawn the actual item, using the Particle emitter
* Rotate - Which allows you to define the orientation of the spawn element

All the animations, animators, materials and meshes will be copied into a specific folder, named "[Avatar name]-ParticlesLock-[YearMonthDay]-[HourMinSeconds]-[Milliseconds]".
You can define where the folder is generated by dropping a folder on "Save Dir".

>  You can actually drop a saved asset on "Save Dir". If you do so, "Save Dir" will be set to that asset folder.

Note :
- Due to how the Particle Emitter works, the orientation of the spawned item ignores the orientation of the avatar.  
  That means that spawned item will always have the same orientation.  
  This is why a "Rotate" button was added, to change its spawned orientation.
- Quest avatars will always have a "Poor" rating when using a Particle Emitter, and the rating can downgrade to Very Poor if the spawned item has more than 200 (two hundred) polygons.  
  You should take this seriously when it comes to Quest Avatars, since Quest avatars with "Very Poor" ratings are automatically displayed as "Perf Blocked" robots.
- You can only use ONE material to define the look of the spawned item.
  Note that, even if it's used as a particle, you CANNOT use Particles shaders, meaning that you'll have to forget about transparency for Quest avatars.

## Lock an item with Constraints

* Add the item to the Scene root
* Add your avatar to the Scene root
* For good measures, make sure that your avatar is at 0,0,0 when measuring the distance between your avatar and the object you want to setup
* Set the rotation and position of the item, in relation to your avatar, to define how it should appear when shown.

* Open the menu "Voyage > Pin Objects with Constraints (PC ONLY)"
* Drop your avatar on the "Avatar" slot
* Open the "World Locked Objects" by clicking on the arrow on its left
* Drop the item on "Element 0"
* Click on "Setup world lock object"
* A new setup clone of the avatar will appear.

You can then upload the clone.

This new clone will have a new submenu button "World Objects" with Toggle buttons allowing you to spawn each individual object.

Note:
- You can setup up to 8 individual items (Only 8 items for now, due to menu creation limitations). To show the other item slots, just set a number higher than 1 in "World Locked Objects > Size"
- The object orientation is always based on the player orientation when showing up the object.
  Note that, once shown, the rotation does not change until you hide it.
- Due to VRChat quirks, seats setup on pinned items won't be useable.  
  This is due to VRChat making seats unuseable if the gameobjects owning them are disabled at any time.  
  There's still a way to make them useable (separate them into another Gameobject that's never disabled, stick the object to the spawned object with constraints, enable/disable the seats colliders with the Show/Hide animations).  
  Making them useable automatically is planned for a future release.

Licence
MIT

Meaning that, yes, You are free to incorporate this tool, or parts of it, into other commercial goods, open source projects, ...

# 使い方

## Particlesでアイテムを固定したいなら:

* Sceneにアイテムを追加して、
* SceneにSDK3のアバターを追加して、
* 距離を正しく計測するために、そのアバターを０、０、０の位置に移動して、
* アバターを基準にして、アイテムの位置を設定して、
* メニューバーから「Voyage > Pin object with Particles (PC Quest - SDK 3.0)」を選んで、

* 開いたパネルで、
  * 「Avatar」にSceneのアバターをドラッグアンドドロップして、
  * 左にある矢印（▷）を使って、World Locked Objectsのサブメニューを開いて、
  * 「Element 0」にSceneのアイテムをドラッグアンドドロップして、
  * 「Setup world lock object」　のボタンをクリックすると、
  
Sceneでアバターの設定される複製が追加されます。
後は、そのアバターをそのまま投稿出来ます。

Emoteメニューで二つのボタンが追加されます：
* Spawn - アイテムを召喚するボタン。
* Rotate - 召喚されているアイテムの向けを決めさせるボタン

## Constraints (束縛)でアイテムを固定したいなら:

* Sceneにアイテムを追加して、
* SceneにSDK3のアバターを追加して、
* 距離を正しく計測するために、そのアバターを０、０、０の位置に移動して、
* アバターを基準にして、アイテムの回転と位置を設定して、
* メニューバーからVoyage > Pin object with Constraints (PC ONLY - SDK 3.0)を選んで、

* 開いたパネルで、
  * AvatarにSceneのアバターをドラッグアンドドロップして、
  * 左にある矢印（▷）にクリックしてWorld Locked Objectsのサブメニューを開いて、
  * Element 0にSceneのアイテムをドラッグアンドドロップして、
  * 「Setup world lock object」　のボタンをクリックすると、

Sceneでアバターの設定される複製が追加されます。
後は、そのアバターをそのまま投稿出来ます。
  
# メリット・デメリット

## Particle System

+ Questでも使えます。
- QuestのアバターのRatingがPoorになります、必ず。
- Questのアバターで200個のポリゴン以上の物を召喚すると、RatingがVery poorになって、相手がShow Avatarしないとアバターすらが見えなくなります。
- パーティクル・システムのレンダラーは一個のマテリアルしか使えませんから、召喚したい物の見た目を一個のマテリアルで決めなければなりません。
- Questのアバターで、意外と、Particles Systemで使っているなのに、そのマテリアルはParticlesのシェイダーを使えません。

## Constraints (束縛)

- PC Only
+ アバターの一部ですから、（座席以外）アバターが使えるComponentをアイテムに付けられます　(音楽、アニメーション、…）。
+ RatingをMedium以下に下げるComponentを付けないなら、アバターとアイテムの全体のポリゴン数が7万を越えない限り、RatingはGood以上になります。

> 座席は付けても使えません。
> このツールは固定されているアイテムを有効・無効します。
> 現在は、VRChatのアバターで座席を持つ物を無効すると二度と使えなません。
> 一応、その座席を使わせる方法がありますね（他のGameObjectに座席を設置して、Constraintを使ってそのGameObjectを固定されている物に付けて、アニメーションを使って座席のColliderを有効・無効したら使えることになります）。
> 将来で、付けた座席を使えることにする機能を追加するつもりです。
